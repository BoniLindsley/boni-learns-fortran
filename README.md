# boni-learns-fortran

A place to store my notes on learning Fortran.

## Install Fortran

### Debian Package Manager

GCC Fortran is available in the Debian official repository:
<https://packages.debian.org/sid/gfortran>

```sh
apt install --no-install-recommends gfortran
```

### Windows MSYS2 Repository

GCC Fortran is available in the MSYS2 official repository
<https://packages.msys2.org/package/mingw-w64-x86_64-gcc-fortran?repo=mingw64>.

```sh
pacman -S mingw-w64-x86_64-gcc-fortran
```

Make sure appropriate `bin` directory is in `%PATH%`
if using from outside a MSYS2 shell.

## Install Fortran Package Manager

The Fortran Package Manager ([fpm](https://github.com/fortran-lang/fpm))
is the currently recommended way to build Fortran applications.

### Windows MSYS2 Repository

fpm is available in the MSYS2 official repository
<https://packages.msys2.org/package/mingw-w64-x86_64-fpm?repo=mingw64>.

```sh
pacman -S mingw-w64-x86_64-fpm
```

### GitHub Source

Basic idea is to clone the GitHub repository and run its install script.
This requires GCC Fortran to already be installed.

```sh
git clone https://github.com/fortran-lang/fpm.git . #
./install.sh
# The script uses `./build/bootstrap` to download and build fpm.
# It produces a single binary output.
ls -l ${HOME}/.local/bin/fpm
```

## First Project

This can be started from the fpm tutorial for a
[first project](https://fpm.fortran-lang.org/en/tutorial/hello-fpm.html).
This requires GCC Fortran and fpm to already be installed.

```sh
fpm new learn-fortran
cd learn-fortran
# Edit project metadata in `fpm.toml`.
fpm build
fpm test
fpm run
```

Alternatively use `Makefile` from this project
if `make` is available but fpm is not.

```sh
make build
make test
make run
```

Learn Fortran from <https://fortran-lang.org/learn/quickstart>.
Edit `app/main.f90` to follow tutorial.

## Documentation with Doxygen

Doxygen provides a command to create a default configuration file.
It creates `Doxyfile` in the current directory.

```sh
doxygen -g
```

There are some common configurations to consider before building.

-   `EXTRACT_ALL = YES`: Document names that are not public interfaces.
-   `GENERATE_LATEX = NO`: Typically not required.
-   `PROJECT_NAME = "New Project"`: Change as desired. Used as title.

Some are specifically for working with Fortran.

-   `INPUT = app src test`: Source directories generated by fpm.
-   `OPTIMIZE_FOR_FORTRAN = YES`: Enable Fortran support.
-   `OUTPUT_DIRECTORY = build/release/docs`: Build directory from fpm.
    -   `OUTPUT_DIRECTORY = $(DOXYGEN_OUTPUT_DIRECTORY)`:
        Use an environment variable to be read at build time.

Pass the configuration file to Doxygen to build documentation.

```sh
doxygen Doxyfile # Creates files in `$OUTPUT_DIRECTORY/html/index.html`.
```
